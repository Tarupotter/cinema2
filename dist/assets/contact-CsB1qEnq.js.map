{"version":3,"file":"contact-CsB1qEnq.js","sources":["../../src/js/contact.js"],"sourcesContent":["\r\nimport '../styles/contact.scss';\r\nimport { createFooter } from './components/footer';\r\nimport './header.js';\r\n\r\n// Header fetch\r\n// Fetch file from contact.json because fetch dont work when file lies in src folder\r\n// Footer fetch\r\n\r\nfetch(\"/database/contact.json\")\r\n  .then((response) => {\r\n    if (!response.ok) {\r\n      throw new Error(\"Network response was not ok\");\r\n    }\r\n    return response.json();\r\n  })\r\n  .then((data) => {\r\n    document.querySelector(\".contact-page__title\").textContent = data.pageTitle;\r\n    document.querySelector(\".contact-form__label--name\").textContent =\r\n      data.form.name;\r\n    document.querySelector(\".contact-form__label--email\").textContent =\r\n      data.form.email;\r\n    document.querySelector(\".contact-form__label--phoneNumber\").textContent =\r\n      data.form.phoneNumber;\r\n    document.querySelector(\".contact-form__label--topic\").textContent =\r\n      data.form.topic;\r\n    document.querySelector(\".contact-form__label--message\").textContent =\r\n      data.form.message;\r\n    document.querySelector(\".contact-form__button\").textContent =\r\n      data.form.submitButton;\r\n\r\n    // Start validation after JSON is loaded\r\n    setupValidation(data.form.validation);\r\n  })\r\n  .catch((error) => {\r\n    console.error(\"Error loading contact data:\", error);\r\n  });\r\n\r\nconst setupValidation = (validationMessages) => {\r\n  const form = document.getElementById(\"contactForm\");\r\n  const submitButton = document.getElementById(\"submitButton\");\r\n\r\n  //Fields and messages\r\n  const fields = [\r\n    { id: \"name\", errorId: \"nameError\", message: validationMessages.name },\r\n    { id: \"email\", errorId: \"emailError\", message: validationMessages.email },\r\n    {\r\n      id: \"phoneNumber\",\r\n      errorId: \"phoneNumberError\",\r\n      message: validationMessages.phoneNumber,\r\n    },\r\n    { id: \"topic\", errorId: \"topicError\", message: validationMessages.topic },\r\n    {\r\n      id: \"message\",\r\n      errorId: \"messageError\",\r\n      message: validationMessages.message,\r\n    },\r\n  ];\r\n\r\n  const visitedFields = new Set();\r\n\r\n  const validateField = (field) => {\r\n    const input = document.getElementById(field.id);\r\n    const error = document.getElementById(field.errorId);\r\n\r\n    error.textContent = \"\";\r\n    input.classList.remove(\"invalid\");\r\n    error.classList.remove(\"visible\");\r\n\r\n    if (field.id === \"email\" && input.value.trim() !== \"\") { \r\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      if (!emailRegex.test(input.value.trim())) { \r\n        error.textContent = validationMessages.email; \r\n        error.classList.add(\"visible\");\r\n        input.classList.add(\"invalid\");\r\n        return false; \r\n      }\r\n    }\r\n\r\n    if (field.id === \"phoneNumber\" && input.value.trim() !== \"\") {\r\n      const phoneRegex = /^[0-9]{10}$/;\r\n      if (!phoneRegex.test(input.value.trim())) {\r\n        error.textContent = validationMessages.phoneNumber;\r\n        error.classList.add(\"visible\");\r\n        input.classList.add(\"invalid\");\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (!input.value.trim()) {\r\n      error.textContent = field.message;\r\n      error.classList.add(\"visible\");\r\n      input.classList.add(\"invalid\");\r\n      return false;\r\n    }\r\n      return true;\r\n    \r\n  };\r\n\r\n  const validateForm = () => {\r\n    let isValid = true;\r\n    fields.forEach((field) => {\r\n      if (!visitedFields.has(field.id)) return;  //\r\n      if (!validateField(field)) {\r\n        isValid = false;\r\n      }\r\n    });\r\n    submitButton.disabled = !isValid;\r\n    return isValid; //\r\n  };\r\n\r\n  form.addEventListener(\"input\", validateForm);\r\n  // Show errormessage when user leave field\r\n  fields.forEach((field) => {\r\n    const input = document.getElementById(field.id);\r\n    const error = document.getElementById(field.errorId);\r\n\r\n    input.addEventListener(\"blur\", () => {\r\n      visitedFields.add(field.id);\r\n      if (!input.value.trim()) {\r\n        error.textContent = field.message;\r\n        error.classList.add(\"visible\");\r\n        input.classList.add(\"invalid\");\r\n      } else { \r\n        error.textContent = \"\";\r\n        error.classList.remove(\"visible\");\r\n        input.classList.remove(\"invalid\");  //\r\n      }\r\n      validateForm();\r\n    });\r\n  });\r\n\r\n\r\n  form.addEventListener(\"submit\", (e) => {\r\n    e.preventDefault();\r\n    let isValid = true;\r\n  \r\n    fields.forEach((field) => visitedFields.add(field.id));\r\n  \r\n    fields.forEach((field) => {\r\n      if (!validateField(field)) {\r\n        isValid = false;\r\n      }\r\n    });\r\n  \r\n    if (isValid) {\r\n      \r\n      const successMessage = document.createElement(\"div\");\r\n      successMessage.textContent = \"FormulÃ¤ret har skickats!\";\r\n      successMessage.classList.add(\"success-message\");\r\n  \r\n     \r\n      const existingMessage = document.querySelector(\".success-message\");\r\n      if (existingMessage) {\r\n        existingMessage.remove();\r\n      }\r\n  \r\n      form.appendChild(successMessage);\r\n  \r\n      \r\n      form.reset();\r\n      visitedFields.clear();\r\n      validateForm(); \r\n    }\r\n  });\r\n  \r\n \r\n  window.addEventListener(\"DOMContentLoaded\", () => {\r\n    submitButton.disabled = true;\r\n});}\r\n"],"names":["response","data","setupValidation","error","validationMessages","form","submitButton","fields","visitedFields","validateField","field","input","validateForm","isValid","e","successMessage","existingMessage"],"mappings":"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"}